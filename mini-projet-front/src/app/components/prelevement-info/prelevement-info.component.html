<div class="my_container">

  <div class="top">
    <div class="top_left">
      <!--<form class="search_bar" [formGroup]="searchFormGroup" (ngSubmit)="handleSearchPrelevement()">
        <input class="search_bar_input" type="text" formControlName="keyword">
        <button class="search_bar_btn"><i class="bi bi-search"> Chercher</i></button>
      </form>-->
      <form [formGroup]="filterFormGroup" (ngSubmit)="handleFilterPrelevement()" class="filter_form">
        <div class="filter_name">
          <label class="filter_label">Nom du produit: </label>
          <input type="text" formControlName="keyword" class="filter_input">
        </div>
        <div class="filter_etat">
          <label class="filter_label">Etat d'avncement:</label>
          <select class="filter_select" formControlName="etat">
            <option></option>
            <option value="EN_INSTANCE" >EN_INSTANCE</option>
            <option value="TERMINEE" >TERMINEE</option>
          </select>
        </div>
        <button class="filter_btn"><i class="bi bi-search"> Chercher</i></button>
      </form>
    </div>
    <div class="top_right">
      <button class="btn_add" (click)="goToPrelevementForm()"><i class="bi bi-plus-circle"> Ajouter</i></button>
    </div>
  </div>

  <div class="table">
    <div class="table_head">
      <div class="table_item">ID</div>
      <div class="table_item">Nom du produit</div>
      <div class="table_item">Catégorie</div>
      <div class="table_item">Date de procés verbal</div>
      <div class="table_item">Numéro de procés verbal</div>
      <div class="table_item">Type de prélèvement</div>
      <div class="table_item">Niveau de prélèvement</div>
      <div class="table_item">Cadre de control</div>
      <div class="table_item">Labo</div>
      <div class="table_item">Date d’envoi</div>
      <div class="table_item">Etat d’avancement</div>
      <div class="table_item"></div>
      <div class="table_item"></div>
    </div>
    <ng-container *ngIf="prelevementResponses">
      <div class="table_body"  *ngFor="let prelevement of prelevementResponses.prelevementDTOS; let i = index">
        <div class="table_item">{{prelevement.id}}</div>
        <div class="table_item">{{prelevement.produitDTO.nom}}</div>
        <div class="table_item">{{prelevement.produitDTO.categorie}}</div>
        <div class="table_item">{{prelevement.dateProcesVerbal | date : 'dd-MM-yyyy'}}</div>
        <div class="table_item">{{prelevement.numeroProcesVerbal}}</div>
        <div class="table_item">{{prelevement.typePrelevement}}</div>
        <div class="table_item">{{prelevement.niveauPrel}}</div>
        <div class="table_item">{{prelevement.cadreControle}}</div>
        <div class="table_item">{{prelevement.laboDestination}}</div>
        <div class="table_item">{{prelevement.dateEnvoie | date : 'dd-MM-yyyy'}}</div>
        <div class="table_item">{{prelevement.etatAvancement}}</div>
        <div class="table_item">
          <button class="btn btn_delete"
                  (click)="handleDeletePrelevement(prelevement.id,
                  prelevementResponses.currentPage, prelevementResponses.pageSize)">
            <i class="bi bi-trash-fill icon"></i>
          </button>
        </div>
        <div class="table_item">
          <button class="btn btn_update"
                  (click)="handleUpdatePrelevement(prelevement, prelevementResponses.currentPage)">
            <i class="bi bi-pencil-fill icon"></i>
          </button>
        </div>
      </div>

      <ul class="pages">
        <li class="page" *ngFor="let item of [].constructor(prelevementResponses.totalPages); let page=index">
          <a>
            <button [ngClass]="page==prelevementResponses.currentPage? 'btn_current_page': 'btn_page'"
                    (click)="goToPage(page)" >
              {{page}}
            </button>
          </a>
        </li>
      </ul>

      </ng-container>

  </div>



</div>

{"ast":null,"code":"import { Detail } from \"../../models/detail.model\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/resultat-prelevement.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"f\"];\nfunction ResultatFormComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"div\", 11);\n    i0.ɵɵelementStart(2, \"div\", 0);\n    i0.ɵɵtext(3, \"D\\u00E9tail de non conformit\\u00E9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 12)(5, \"div\", 4)(6, \"label\");\n    i0.ɵɵtext(7, \"Num\\u00E9ro TA:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\");\n    i0.ɵɵtext(11, \"Date TA:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\");\n    i0.ɵɵtext(15, \"D\\u00E9tail:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport class ResultatFormComponent {\n  constructor(activatedRoute, resultatPrelevementService, route) {\n    this.activatedRoute = activatedRoute;\n    this.resultatPrelevementService = resultatPrelevementService;\n    this.route = route;\n    this.detail = new Detail();\n  }\n  ngOnInit() {\n    this.resultat = {};\n    this.activatedRoute.params.subscribe(params => {\n      this.resultat.idPrelevement = params['id'];\n    });\n  }\n  onSubmit() {\n    console.log(this.Signupfrom?.value);\n    this.resultat.dateBA = this.Signupfrom?.value.date_BA;\n    this.resultat.numeroBA = this.Signupfrom?.value.numeroBA;\n    let jwt = localStorage.getItem('token');\n    let jwtData = '';\n    if (jwt) jwtData = jwt.split('.')[1];\n    let decodedJwtJsonData = window.atob(jwtData);\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\n    let idPersonne = decodedJwtData.idPersonne;\n    this.resultat.idPersonne = idPersonne;\n    if (this.Signupfrom?.value.choix == \"Oui\") {\n      this.resultat.conforme = true;\n    } else {\n      this.resultat.conforme = false;\n      this.detail.dateTA = this.Signupfrom?.value.DateTA;\n      this.detail.detail = this.Signupfrom?.value.Détail;\n      this.detail.numeroTA = this.Signupfrom?.value.NuméroTA;\n    }\n    this.resultatPrelevementService.saveresultat(this.resultat).subscribe({\n      next: resultat => {\n        console.log(\"Gooood\");\n        if (!this.resultat.conforme) {\n          console.log('Gooood2');\n          this.detail.idResultat = resultat.id;\n          this.resultatPrelevementService.saveDetailNonConformite(this.detail).subscribe({\n            next: data => {\n              console.log(data);\n            },\n            error: err => {\n              console.log(err);\n            }\n          });\n        }\n        this.Signupfrom?.reset();\n        this.route.navigate([\"feedback\"]);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n}\nResultatFormComponent.ɵfac = function ResultatFormComponent_Factory(t) {\n  return new (t || ResultatFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ResultatPrelevementService), i0.ɵɵdirectiveInject(i1.Router));\n};\nResultatFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ResultatFormComponent,\n  selectors: [[\"app-resultat-form\"]],\n  viewQuery: function ResultatFormComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.Signupfrom = _t.first);\n    }\n  },\n  decls: 24,\n  vars: 4,\n  consts: [[1, \"header\"], [3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"my_container\"], [1, \"Nom\"], [\"placeholder\", \"ex:2334\", \"type\", \"text\", \"ngModel\", \"\", \"name\", \"numeroBA\", \"required\", \"\", \"number\", \"\"], [\"type\", \"date\", \"ngModel\", \"\", \"name\", \"date_BA\", \"required\", \"\"], [\"name\", \"choix\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"my_container2\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [1, \"my_container2\"], [1, \"liner\"], [1, \"my_container\", \"my_container2\"], [\"placeholder\", \"ex:2334\", \"type\", \"text\", \"ngModel\", \"\", \"name\", \"Num\\u00E9roTA\", \"required\", \"\", \"number\", \"\"], [\"type\", \"Date\", \"ngModel\", \"\", \"name\", \"DateTA\", \"required\", \"\"], [\"type\", \"text\", \"ngModel\", \"\", \"name\", \"D\\u00E9tail\", \"required\", \"\"]],\n  template: function ResultatFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 1, 2);\n      i0.ɵɵlistener(\"ngSubmit\", function ResultatFormComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"label\");\n      i0.ɵɵtext(7, \"Num\\u00E9ro BA:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\");\n      i0.ɵɵtext(11, \"Date de BA:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\");\n      i0.ɵɵtext(15, \"Conformit\\u00E9:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"select\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ResultatFormComponent_Template_select_ngModelChange_16_listener($event) {\n        return ctx.selected = $event;\n      });\n      i0.ɵɵelementStart(17, \"option\");\n      i0.ɵɵtext(18, \"Oui\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"option\");\n      i0.ɵɵtext(20, \"Non\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(21, ResultatFormComponent_div_21_Template, 17, 0, \"div\", 8);\n      i0.ɵɵelementStart(22, \"button\", 9);\n      i0.ɵɵtext(23, \"Soumettre\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(3);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" Enregister les r\\u00E9sultats de pr\\u00E9l\\u00E8vement d'\\u00E9chantillons:\", ctx.resultat.idPrelevement, \"\");\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngModel\", ctx.selected);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.selected === \"Non\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !_r0.valid);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n  styles: [\".header[_ngcontent-%COMP%]{\\r\\n  padding-top: 1.5rem;\\r\\n  text-align: center;\\r\\n  font-weight: 500;\\r\\n  font-size: 25px;\\r\\n  color: #6095C1;\\r\\n}\\r\\n@media(max-width:700px){\\r\\n  .header[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n  }\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\nform[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.my_container[_ngcontent-%COMP%] {\\r\\n  margin-top: 30px;\\r\\n  width: 50%;\\r\\n  display: grid;\\r\\n  grid-template-columns: 40% 40% ;\\r\\n  column-gap: 20%;\\r\\n}\\r\\n\\r\\n.my_container2[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.Nom[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  margin-bottom: 15px;\\r\\n}\\r\\n\\r\\n.Nom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .Nom[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\r\\n  width: 250px;\\r\\n  height: 35px;\\r\\n  margin-top: 10px;\\r\\n}\\r\\n\\r\\n.Nom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\r\\n  font-size: 15px;\\r\\n  padding: 10px;\\r\\n}\\r\\n\\r\\n\\r\\nform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\\r\\n  justify-content: start;\\r\\n\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]{\\r\\n  background-color: #05F300;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  font-weight: 600;\\r\\n  font-size: 20px;\\r\\n  padding: 10px 20px;\\r\\n  border-radius: 10px;\\r\\n  margin-top: 15px;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%]:hover {\\r\\n  cursor: pointer;\\r\\n  opacity: 0.9;\\r\\n}\\r\\n\\r\\n.formvalid[_ngcontent-%COMP%]{\\r\\n  opacity: 0.3;\\r\\n}\\r\\ninput.ng-invalid.ng-touched[_ngcontent-%COMP%]{\\r\\n  border: 1px solid red;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9yZXN1bHRhdC1mb3JtL3Jlc3VsdGF0LWZvcm0uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixjQUFjO0FBQ2hCO0FBQ0E7RUFDRTtJQUNFLGFBQWE7RUFDZjtBQUNGOzs7O0FBSUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixVQUFVO0VBQ1YsYUFBYTtFQUNiLCtCQUErQjtFQUMvQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osWUFBWTtFQUNaLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixhQUFhO0FBQ2Y7OztBQUdBO0VBQ0Usc0JBQXNCOztBQUV4QjtBQUNBO0VBQ0UseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7QUFDQTtFQUNFLHFCQUFxQjtBQUN2QiIsInNvdXJjZXNDb250ZW50IjpbIi5oZWFkZXJ7XHJcbiAgcGFkZGluZy10b3A6IDEuNXJlbTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICBmb250LXNpemU6IDI1cHg7XHJcbiAgY29sb3I6ICM2MDk1QzE7XHJcbn1cclxuQG1lZGlhKG1heC13aWR0aDo3MDBweCl7XHJcbiAgLmhlYWRlcntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcbmZvcm17XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5teV9jb250YWluZXIge1xyXG4gIG1hcmdpbi10b3A6IDMwcHg7XHJcbiAgd2lkdGg6IDUwJTtcclxuICBkaXNwbGF5OiBncmlkO1xyXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNDAlIDQwJSA7XHJcbiAgY29sdW1uLWdhcDogMjAlO1xyXG59XHJcblxyXG4ubXlfY29udGFpbmVyMiB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5Ob217XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi5Ob20gaW5wdXQsIC5Ob20gc2VsZWN0IHtcclxuICB3aWR0aDogMjUwcHg7XHJcbiAgaGVpZ2h0OiAzNXB4O1xyXG4gIG1hcmdpbi10b3A6IDEwcHg7XHJcbn1cclxuXHJcbi5Ob20gaW5wdXQge1xyXG4gIGZvbnQtc2l6ZTogMTVweDtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG59XHJcblxyXG5cclxuZm9ybSBidXR0b257XHJcbiAganVzdGlmeS1jb250ZW50OiBzdGFydDtcclxuXHJcbn1cclxuYnV0dG9ue1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwNUYzMDA7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG4gIGZvbnQtc2l6ZTogMjBweDtcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBtYXJnaW4tdG9wOiAxNXB4O1xyXG59XHJcblxyXG5idXR0b246aG92ZXIge1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBvcGFjaXR5OiAwLjk7XHJcbn1cclxuXHJcbi5mb3JtdmFsaWR7XHJcbiAgb3BhY2l0eTogMC4zO1xyXG59XHJcbmlucHV0Lm5nLWludmFsaWQubmctdG91Y2hlZHtcclxuICBib3JkZXI6IDFweCBzb2xpZCByZWQ7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Detail","i0","ResultatFormComponent","constructor","activatedRoute","resultatPrelevementService","route","ngOnInit","resultat","params","subscribe","idPrelevement","onSubmit","console","log","Signupfrom","value","dateBA","date_BA","numeroBA","jwt","localStorage","getItem","jwtData","split","decodedJwtJsonData","window","atob","decodedJwtData","JSON","parse","idPersonne","choix","conforme","detail","dateTA","DateTA","Détail","numeroTA","NuméroTA","saveresultat","next","idResultat","id","saveDetailNonConformite","data","error","err","reset","navigate","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\hp\\OneDrive\\Desktop\\Nouveau dossier (5)\\mini-projet-front\\mini-projet-front\\src\\app\\components\\resultat-form\\resultat-form.component.ts","C:\\Users\\hp\\OneDrive\\Desktop\\Nouveau dossier (5)\\mini-projet-front\\mini-projet-front\\src\\app\\components\\resultat-form\\resultat-form.component.html"],"sourcesContent":["import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {NgForm} from \"@angular/forms\";\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ResultatPrelevementDtos } from 'src/app/models/resultatPrelevement.model';\r\nimport { ResultatPrelevementService } from 'src/app/services/resultat-prelevement.service';\r\nimport {Detail} from \"../../models/detail.model\";\r\n\r\n@Component({\r\n  selector: 'app-resultat-form',\r\n  templateUrl: './resultat-form.component.html',\r\n  styleUrls: ['./resultat-form.component.css']\r\n})\r\nexport class ResultatFormComponent implements OnInit{\r\n  selected!: string;\r\n  page!: number;\r\n  id!: string;\r\n  public resultat!: ResultatPrelevementDtos;\r\n  detail: Detail = new Detail();\r\n  constructor( private activatedRoute: ActivatedRoute,\r\n               private resultatPrelevementService:ResultatPrelevementService,\r\n               private route:Router){\r\n  }\r\n  @ViewChild('f') Signupfrom: NgForm | undefined;\r\n  ngOnInit(): void {\r\n    this.resultat = {} as ResultatPrelevementDtos;\r\n    this.activatedRoute.params.subscribe(params => {\r\n      this.resultat.idPrelevement= params['id'];})\r\n    }\r\n\r\n  onSubmit(){\r\n    console.log(this.Signupfrom?.value);\r\n    this.resultat.dateBA=this.Signupfrom?.value.date_BA;\r\n    this.resultat.numeroBA=this.Signupfrom?.value.numeroBA;\r\n    let jwt: string | null = localStorage.getItem('token');\r\n    let jwtData: string = '';\r\n    if (jwt) jwtData = jwt.split('.')[1];\r\n    let decodedJwtJsonData = window.atob(jwtData);\r\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n    let idPersonne = decodedJwtData.idPersonne;\r\n    this.resultat.idPersonne=idPersonne;\r\n    if(this.Signupfrom?.value.choix==\"Oui\"){\r\n      this.resultat.conforme=true;\r\n    }\r\n    else{\r\n      this.resultat.conforme=false;\r\n      this.detail.dateTA=this.Signupfrom?.value.DateTA;\r\n      this.detail.detail=this.Signupfrom?.value.Détail;\r\n      this.detail.numeroTA=this.Signupfrom?.value.NuméroTA;\r\n    }\r\n    this.resultatPrelevementService.saveresultat(this.resultat).subscribe({\r\n      next: resultat => {\r\n        console.log(\"Gooood\");\r\n        if(!this.resultat.conforme){\r\n          console.log('Gooood2')\r\n          this.detail.idResultat = resultat.id;\r\n          this.resultatPrelevementService.saveDetailNonConformite(this.detail).subscribe({\r\n            next: data => {\r\n              console.log(data);\r\n            },\r\n            error: err => {\r\n              console.log(err);\r\n            }\r\n          })\r\n        }\r\n        this.Signupfrom?.reset();\r\n        this.route.navigate([\"feedback\"]);\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n  \r\n}\r\n","<div class=\"header\"> Enregister les résultats de prélèvement d'échantillons:{{resultat.idPrelevement}}</div>\r\n<form (ngSubmit)=\"onSubmit()\" #f=\"ngForm\">\r\n  <div class=\"my_container\">\r\n    <div class=\"Nom\">\r\n      <label>Numéro BA:</label>\r\n      <input placeholder=\"ex:2334\" type=\"text\" ngModel  name=\"numeroBA\" required number>\r\n    </div>\r\n\r\n    <div class=\"Nom\">\r\n      <label>Date de BA:</label>\r\n      <input type=\"date\" ngModel name=\"date_BA\" required>\r\n    </div>\r\n\r\n    <div class=\"Nom\">\r\n      <label>Conformité:</label>\r\n      <select [(ngModel)]=\"selected\"  name=\"choix\">\r\n        <option >Oui</option>\r\n        <option >Non</option>\r\n      </select>\r\n    </div>\r\n\r\n  </div>\r\n  <div  class=\"my_container2\" *ngIf=\"selected==='Non'\" >\r\n    <div class=\"liner\"></div>\r\n    <div class=\"header\">Détail de non conformité</div>\r\n\r\n    <div class=\"my_container my_container2\" >\r\n\r\n      <div class=\"Nom\">\r\n        <label  >Numéro TA:</label>\r\n        <input placeholder=\"ex:2334\" type=\"text\" ngModel  name=\"NuméroTA\" required number>\r\n      </div>\r\n\r\n      <div class=\"Nom\">\r\n        <label>Date TA:</label>\r\n        <input  type=\"Date\" ngModel  name=\"DateTA\" required>\r\n      </div>\r\n\r\n      <div class=\"Nom\">\r\n        <label>Détail:</label>\r\n        <input  type=\"text\" ngModel  name=\"Détail\" required>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <button type=\"submit\" [disabled]=\"!f.valid\" class=\"btn btn-success\">Soumettre</button>\r\n</form>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
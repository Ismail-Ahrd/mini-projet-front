{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nlet ResultatFormComponent = class ResultatFormComponent {\n  constructor(activatedRoute, resultatprelevement, route, resultat) {\n    this.activatedRoute = activatedRoute;\n    this.resultatprelevement = resultatprelevement;\n    this.route = route;\n    this.resultat = resultat;\n  }\n  ngOnInit() {\n    this.activatedRoute.params.subscribe(params => {\n      this.resultat.idPrelevement = params['id'];\n    });\n  }\n  onSubmit() {\n    console.log(this.Signupfrom?.value);\n    this.resultat.dateBA = this.Signupfrom?.value.date_BA;\n    this.resultat.numeroBA = this.Signupfrom?.value.numeroBA;\n    let jwt = localStorage.getItem('token');\n    let jwtData = '';\n    if (jwt) jwtData = jwt.split('.')[1];\n    let decodedJwtJsonData = window.atob(jwtData);\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\n    let idPersonne = decodedJwtData.idPersonne;\n    this.resultat.idPersonne = idPersonne;\n    if (this.Signupfrom?.value.choix == \"Oui\") {\n      this.resultat.conforme = true;\n      this.resultat.dateTA = \"\";\n      this.resultat.detail = \"\";\n      this.resultat.numeroTA = 0;\n    } else {\n      this.resultat.conforme = false;\n      this.resultat.dateTA = this.Signupfrom?.value.DateTA;\n      this.resultat.detail = this.Signupfrom?.value.Détail;\n      this.resultat.numeroTA = this.Signupfrom?.value.NuméroTA;\n    }\n    this.resultatprelevement.saveresultat(this.resultat).subscribe({\n      next: data => {\n        console.log(\"Gooood\");\n        this.Signupfrom?.reset();\n        this.route.navigate([\"feedback\"]);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n};\n__decorate([ViewChild('f')], ResultatFormComponent.prototype, \"Signupfrom\", void 0);\nResultatFormComponent = __decorate([Component({\n  selector: 'app-resultat-form',\n  templateUrl: './resultat-form.component.html',\n  styleUrls: ['./resultat-form.component.css']\n})], ResultatFormComponent);\nexport { ResultatFormComponent };","map":{"version":3,"mappings":"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","names":["Component","ViewChild","ResultatFormComponent","constructor","activatedRoute","resultatprelevement","route","resultat","ngOnInit","params","subscribe","idPrelevement","onSubmit","console","log","Signupfrom","value","dateBA","date_BA","numeroBA","jwt","localStorage","getItem","jwtData","split","decodedJwtJsonData","window","atob","decodedJwtData","JSON","parse","idPersonne","choix","conforme","dateTA","detail","numeroTA","DateTA","Détail","NuméroTA","saveresultat","next","data","reset","navigate","error","err","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\P15S 1\\Desktop\\fronte\\mini-projet-front\\mini-projet-front\\src\\app\\components\\resultat-form\\resultat-form.component.ts"],"sourcesContent":["import {Component, ViewChild} from '@angular/core';\r\nimport {NgForm} from \"@angular/forms\";\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ResultatPrelevementDtos } from 'src/app/models/resultatPrelevement.model';\r\nimport { ResultatPrelevementService } from 'src/app/services/resultat-prelevement.service';\r\n\r\n@Component({\r\n  selector: 'app-resultat-form',\r\n  templateUrl: './resultat-form.component.html',\r\n  styleUrls: ['./resultat-form.component.css']\r\n})\r\nexport class ResultatFormComponent {\r\n  selected!: string;\r\n  page!: number;\r\n  \r\n  constructor( private activatedRoute: ActivatedRoute,private resultatprelevement:ResultatPrelevementService,private route:Router, public resultat: ResultatPrelevementDtos;){\r\n  }\r\n  @ViewChild('f') Signupfrom: NgForm | undefined;\r\n  ngOnInit(): void {\r\n    \r\n    this.activatedRoute.params.subscribe(params => {\r\n      this.resultat.idPrelevement = params['id'];})\r\n\r\n    }\r\n\r\n  onSubmit(){\r\n  console.log(this.Signupfrom?.value);\r\n  this.resultat.dateBA=this.Signupfrom?.value.date_BA;\r\n  this.resultat.numeroBA=this.Signupfrom?.value.numeroBA;\r\n  let jwt: string | null = localStorage.getItem('token');\r\n    let jwtData: string = '';\r\n    if (jwt) jwtData = jwt.split('.')[1];\r\n    let decodedJwtJsonData = window.atob(jwtData);\r\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n    let idPersonne = decodedJwtData.idPersonne;\r\nthis.resultat.idPersonne=idPersonne;\r\n  if(this.Signupfrom?.value.choix==\"Oui\"){\r\n    this.resultat.conforme=true;\r\n    this.resultat.dateTA=\"\";\r\n    this.resultat.detail=\"\";\r\n    this.resultat.numeroTA=0;\r\n\r\n    \r\n  }\r\n  else{\r\n    this.resultat.conforme=false;\r\n    this.resultat.dateTA=this.Signupfrom?.value.DateTA;\r\n    this.resultat.detail=this.Signupfrom?.value.Détail;\r\n    this.resultat.numeroTA=this.Signupfrom?.value.NuméroTA;\r\n  }\r\n  this.resultatprelevement.saveresultat(this.resultat).subscribe({\r\n    next: data => {\r\n      console.log(\"Gooood\");\r\n      this.Signupfrom?.reset();\r\n      this.route.navigate([\"feedback\"]);\r\n    },\r\n    error: err => {\r\n      console.log(err);\r\n    }\r\n  })\r\n  }\r\n  \r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
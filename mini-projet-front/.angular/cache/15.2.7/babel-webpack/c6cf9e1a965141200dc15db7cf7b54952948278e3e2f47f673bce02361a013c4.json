{"ast":null,"code":"import { HttpHeaders } from \"@angular/common/http\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./authentication.service\";\nexport class PrelevementService {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.backendHost = \"http://localhost:8080\";\n  }\n  getAllPrelevement(keyword, etat, page, size) {\n    let url = `${this.backendHost}/prelevement/personne?keyword=${keyword}&page=${page}&size=${size}&etat=${etat}`;\n    const token = localStorage.getItem(\"token\");\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      })\n    };\n    if (this.authService.decodedToken.labo) {\n      console.log(\"teeeeest\");\n      url = `${this.backendHost}/prelevement/labo?keyword=${keyword}&page=${page}&size=${size}&etat=${etat}`;\n    }\n    return this.http.get(url, httpOptions);\n  }\n  savePrelevement(prelevement) {\n    let url = `${this.backendHost}/prelevement`;\n    const token = localStorage.getItem(\"token\");\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      })\n    };\n    return this.http.post(url, prelevement, httpOptions);\n  }\n  deletePrelevement(id) {\n    const token = localStorage.getItem(\"token\");\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      })\n    };\n    return this.http.delete(`${this.backendHost}/prelevement/${id}`, httpOptions);\n  }\n  getPrelevementById(id) {\n    let url = `${this.backendHost}/prelevement/${id}`;\n    const token = localStorage.getItem(\"token\");\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      })\n    };\n    return this.http.get(url, httpOptions);\n  }\n}\nPrelevementService.ɵfac = function PrelevementService_Factory(t) {\n  return new (t || PrelevementService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AuthenticationService));\n};\nPrelevementService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: PrelevementService,\n  factory: PrelevementService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AACA,SAAoBA,WAAW,QAAO,sBAAsB;;;;AAU5D,OAAM,MAAOC,kBAAkB;EAE7BC,YAAoBC,IAAiB,EAAUC,WAAkC;IAA7D,SAAI,GAAJD,IAAI;IAAuB,gBAAW,GAAXC,WAAW;IAD1D,gBAAW,GAAW,uBAAuB;EACwC;EAE9EC,iBAAiB,CAACC,OAAe,EAAEC,IAAY,EAC7BC,IAAY,EAAEC,IAAY;IAEjD,IAAIC,GAAG,GACH,GAAG,IAAI,CAACC,WAAW,iCAAiCL,OAAO,SAASE,IAAI,SAASC,IAAI,SAASF,IAAI,EAAE;IACxG,MAAMK,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,WAAW,GAAG;MAClBC,OAAO,EAAE,IAAIhB,WAAW,CAAC;QACvB,cAAc,EAAG,kBAAkB;QACnC,eAAe,EAAE,SAAS,GAAGY;OAC9B;KACF;IACD,IAAG,IAAI,CAACR,WAAW,CAACa,YAAY,CAACC,IAAI,EAAC;MACpCC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;MACvBV,GAAG,GAAG,GAAG,IAAI,CAACC,WAAW,6BAA6BL,OAAO,SAASE,IAAI,SAASC,IAAI,SAASF,IAAI,EAAE;;IAExG,OAAO,IAAI,CAACJ,IAAI,CAACkB,GAAG,CAAsBX,GAAG,EAAEK,WAAW,CAAC;EAC7D;EAGOO,eAAe,CAACC,WAAyB;IAC9C,IAAIb,GAAG,GAAW,GAAG,IAAI,CAACC,WAAW,cAAc;IACnD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,WAAW,GAAG;MAClBC,OAAO,EAAE,IAAIhB,WAAW,CAAC;QACvB,cAAc,EAAG,kBAAkB;QACnC,eAAe,EAAE,SAAS,GAAGY;OAC9B;KACF;IACD,OAAO,IAAI,CAACT,IAAI,CAACqB,IAAI,CAACd,GAAG,EAAEa,WAAW,EAAER,WAAW,CAAC;EACtD;EAEOU,iBAAiB,CAACC,EAAU;IACjC,MAAMd,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,WAAW,GAAG;MAClBC,OAAO,EAAE,IAAIhB,WAAW,CAAC;QACvB,cAAc,EAAG,kBAAkB;QACnC,eAAe,EAAE,SAAS,GAAGY;OAC9B;KACF;IACD,OAAO,IAAI,CAACT,IAAI,CAACwB,MAAM,CAAC,GAAG,IAAI,CAAChB,WAAW,gBAAgBe,EAAE,EAAE,EAAEX,WAAW,CAAC;EAC/E;EAEOa,kBAAkB,CAACF,EAAU;IAClC,IAAIhB,GAAG,GAAW,GAAG,IAAI,CAACC,WAAW,gBAAgBe,EAAE,EAAE;IACzD,MAAMd,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,WAAW,GAAG;MAClBC,OAAO,EAAE,IAAIhB,WAAW,CAAC;QACvB,cAAc,EAAG,kBAAkB;QACnC,eAAe,EAAE,SAAS,GAAGY;OAC9B;KACF;IACD,OAAO,IAAI,CAACT,IAAI,CAACkB,GAAG,CAAcX,GAAG,EAAEK,WAAW,CAAC;EACrD;;AAzDWd,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;SAAlBA,kBAAkB;EAAA4B,SAAlB5B,kBAAkB;EAAA6B,YAFjB;AAAM","names":["HttpHeaders","PrelevementService","constructor","http","authService","getAllPrelevement","keyword","etat","page","size","url","backendHost","token","localStorage","getItem","httpOptions","headers","decodedToken","labo","console","log","get","savePrelevement","prelevement","post","deletePrelevement","id","delete","getPrelevementById","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\hp\\OneDrive\\Desktop\\Nouveau dossier (5)\\mini-projet-front\\mini-projet-front\\src\\app\\services\\prelevement.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {HttpClient, HttpHeaders} from \"@angular/common/http\";\r\nimport {Observable} from \"rxjs\";\r\nimport {Prelevement, PrelevementResponse} from \"../models/prelevement.model\";\r\nimport {ResultatPrelevementDtos} from \"../models/resultatPrelevement.model\";\r\nimport {AuthenticationService} from \"./authentication.service\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PrelevementService {\r\n  backendHost: string = \"http://localhost:8080\";\r\n  constructor(private http : HttpClient, private authService: AuthenticationService) { }\r\n\r\n  public getAllPrelevement(keyword: string, etat: string,\r\n                           page: number, size: number): Observable<PrelevementResponse>\r\n  {\r\n    let url: string =\r\n        `${this.backendHost}/prelevement/personne?keyword=${keyword}&page=${page}&size=${size}&etat=${etat}`;\r\n    const token = localStorage.getItem(\"token\");\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/json',\r\n        'Authorization': 'Bearer ' + token\r\n      })\r\n    };\r\n    if(this.authService.decodedToken.labo){\r\n      console.log(\"teeeeest\")\r\n      url = `${this.backendHost}/prelevement/labo?keyword=${keyword}&page=${page}&size=${size}&etat=${etat}`;\r\n    }\r\n    return this.http.get<PrelevementResponse>(url, httpOptions);\r\n  }\r\n\r\n\r\n  public savePrelevement(prelevement:  Prelevement) {\r\n    let url: string = `${this.backendHost}/prelevement`;\r\n    const token = localStorage.getItem(\"token\");\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/json',\r\n        'Authorization': 'Bearer ' + token\r\n      })\r\n    };\r\n    return this.http.post(url, prelevement, httpOptions);\r\n  }\r\n\r\n  public deletePrelevement(id: number) {\r\n    const token = localStorage.getItem(\"token\");\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/json',\r\n        'Authorization': 'Bearer ' + token\r\n      })\r\n    };\r\n    return this.http.delete(`${this.backendHost}/prelevement/${id}`, httpOptions);\r\n  }\r\n\r\n  public getPrelevementById(id: number) {\r\n    let url: string = `${this.backendHost}/prelevement/${id}`;\r\n    const token = localStorage.getItem(\"token\");\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        'Content-Type':  'application/json',\r\n        'Authorization': 'Bearer ' + token\r\n      })\r\n    };\r\n    return this.http.get<Prelevement>(url, httpOptions);\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
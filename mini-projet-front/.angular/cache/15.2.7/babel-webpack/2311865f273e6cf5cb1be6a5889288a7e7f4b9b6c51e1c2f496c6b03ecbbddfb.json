{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/resultat-prelevement.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"f\"];\nfunction ResultatFormComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"div\", 13);\n    i0.ɵɵelementStart(2, \"div\", 14);\n    i0.ɵɵtext(3, \"D\\u00E9tail de non conformit\\u00E9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 15)(5, \"div\", 16)(6, \"label\", 5);\n    i0.ɵɵtext(7, \"Num\\u00E9ro TA:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 16)(10, \"label\", 5);\n    i0.ɵɵtext(11, \"Date TA:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 16)(14, \"label\", 5);\n    i0.ɵɵtext(15, \"D\\u00E9tail:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 19);\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport class ResultatFormComponent {\n  constructor(activatedRoute, resultatprelevement, route) {\n    this.activatedRoute = activatedRoute;\n    this.resultatprelevement = resultatprelevement;\n    this.route = route;\n  }\n  ngOnInit() {\n    this.activatedRoute.params.subscribe(params => {\n      this.resultat.idPrelevement = params['id'];\n    });\n  }\n  onSubmit() {\n    console.log(this.Signupfrom?.value);\n    this.resultat.dateBA = this.Signupfrom?.value.date_BA;\n    this.resultat.numeroBA = this.Signupfrom?.value.numeroBA;\n    let jwt = localStorage.getItem('token');\n    let jwtData = '';\n    if (jwt) jwtData = jwt.split('.')[1];\n    let decodedJwtJsonData = window.atob(jwtData);\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\n    let idPersonne = decodedJwtData.idPersonne;\n    this.resultat.idPersonne = idPersonne;\n    if (this.Signupfrom?.value.choix == \"Oui\") {\n      this.resultat.conforme = true;\n      this.resultat.dateTA = \"\";\n      this.resultat.detail = \"\";\n      this.resultat.numeroTA = 0;\n    } else {\n      this.resultat.conforme = false;\n      this.resultat.dateTA = this.Signupfrom?.value.DateTA;\n      this.resultat.detail = this.Signupfrom?.value.Détail;\n      this.resultat.numeroTA = this.Signupfrom?.value.NuméroTA;\n    }\n    this.resultatprelevement.saveresultat(this.resultat).subscribe({\n      next: data => {\n        console.log(\"Gooood\");\n        this.Signupfrom?.reset();\n        this.route.navigate([\"feedback\"]);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n}\nResultatFormComponent.ɵfac = function ResultatFormComponent_Factory(t) {\n  return new (t || ResultatFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ResultatPrelevementService), i0.ɵɵdirectiveInject(i1.Router));\n};\nResultatFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ResultatFormComponent,\n  selectors: [[\"app-resultat-form\"]],\n  viewQuery: function ResultatFormComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.Signupfrom = _t.first);\n    }\n  },\n  decls: 24,\n  vars: 4,\n  consts: [[1, \"header\"], [3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"Nom\"], [1, \"Nom3\"], [\"for\", \"Nom\"], [\"placeholder\", \"ex:2334\", \"type\", \"text\", \"ngModel\", \"\", \"name\", \"numeroBA\", \"required\", \"\", \"number\", \"\"], [\"for\", \"date\"], [\"type\", \"date\", \"ngModel\", \"\", \"name\", \"date_BA\", \"required\", \"\"], [\"for\", \"Typeprel\"], [\"name\", \"choix\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [1, \"liner\"], [1, \"header2\"], [1, \"form2\"], [1, \"Nom2\"], [\"placeholder\", \"ex:2334\", \"type\", \"text\", \"ngModel\", \"\", \"name\", \"Num\\u00E9roTA\", \"required\", \"\", \"number\", \"\"], [\"type\", \"Date\", \"ngModel\", \"\", \"name\", \"DateTA\", \"required\", \"\"], [\"type\", \"text\", \"ngModel\", \"\", \"name\", \"D\\u00E9tail\", \"required\", \"\"]],\n  template: function ResultatFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 1, 2);\n      i0.ɵɵlistener(\"ngSubmit\", function ResultatFormComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7, \"Num\\u00E9ro BA:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\", 7);\n      i0.ɵɵtext(11, \"Date de BA:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\", 9);\n      i0.ɵɵtext(15, \"Conformit\\u00E9:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"select\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ResultatFormComponent_Template_select_ngModelChange_16_listener($event) {\n        return ctx.selected = $event;\n      });\n      i0.ɵɵelementStart(17, \"option\");\n      i0.ɵɵtext(18, \"Oui\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"option\");\n      i0.ɵɵtext(20, \"Non\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(21, ResultatFormComponent_div_21_Template, 17, 0, \"div\", 11);\n      i0.ɵɵelementStart(22, \"button\", 12);\n      i0.ɵɵtext(23, \"Soumettre\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(3);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" Enregister les r\\u00E9sultats de pr\\u00E9l\\u00E8vement d'\\u00E9chantillons:\", ctx.resultat.idPrelevement, \"\");\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngModel\", ctx.selected);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.selected === \"Non\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !_r0.valid);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n  styles: [\".header[_ngcontent-%COMP%]{\\r\\n  padding-top: 3rem;\\r\\n  display: flex;\\r\\n  justify-content:center;\\r\\n  font-weight: bold;\\r\\n  font-size: 25px;\\r\\n\\r\\n\\r\\n}\\r\\n@media(max-width:700px){\\r\\n  .header[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n\\r\\n\\r\\n  }\\r\\n\\r\\n}\\r\\nform[_ngcontent-%COMP%]{\\r\\n\\r\\n  border: 3px solid green;\\r\\n\\r\\n}\\r\\n.Nom[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\n  margin-top: 2%;\\r\\n  margin-right: 1%;\\r\\n\\r\\n\\r\\n\\r\\n  justify-content: space-between;\\r\\n\\r\\n\\r\\n  font-weight: bold;\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n}\\r\\n\\r\\nform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\\r\\n  justify-content: start;\\r\\n\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%]{\\r\\n  background-color: green;\\r\\n  font-weight: bold;\\r\\n  border-radius: 5%;\\r\\n  width: 100px;\\r\\n  height: 50px;\\r\\n  color: aliceblue;\\r\\n  margin-top: 3%;\\r\\n  margin-bottom: 2%;\\r\\n  display: flex;\\r\\n  margin-left: 45%;\\r\\n\\r\\n}\\r\\n.formvalid[_ngcontent-%COMP%]{\\r\\n  opacity: 0.3;\\r\\n}\\r\\ninput.ng-invalid.ng-touched[_ngcontent-%COMP%]{\\r\\n  border: 1px solid red;\\r\\n}\\r\\n.header2[_ngcontent-%COMP%]{\\r\\n\\r\\n  display: flex;\\r\\n  justify-content:center;\\r\\n  font-weight: bold;\\r\\n  font-size: 25px;}\\r\\n.liner[_ngcontent-%COMP%]{\\r\\n  height: 3px;\\r\\n  background-color: green;\\r\\n  margin-top: 1%;\\r\\n}\\r\\n.form2[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\n  margin-top: 2%;\\r\\n  flex-wrap: wrap;\\r\\n\\r\\n\\r\\n  justify-content: space-between;\\r\\n\\r\\n\\r\\n  font-weight: bold;\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n}\\r\\n@media(max-width:1000px) {\\r\\n  form[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    flex-wrap: wrap;\\r\\n    flex-grow: 1;\\r\\n  }\\r\\n\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9yZXN1bHRhdC1mb3JtL3Jlc3VsdGF0LWZvcm0uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFpQjtFQUNqQixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLGlCQUFpQjtFQUNqQixlQUFlOzs7QUFHakI7QUFDQTtFQUNFO0lBQ0UsYUFBYTs7O0VBR2Y7O0FBRUY7QUFDQTs7RUFFRSx1QkFBdUI7O0FBRXpCO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsY0FBYztFQUNkLGdCQUFnQjs7OztFQUloQiw4QkFBOEI7OztFQUc5QixpQkFBaUI7Ozs7O0FBS25COztBQUVBO0VBQ0Usc0JBQXNCOztBQUV4Qjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2QixpQkFBaUI7RUFDakIsaUJBQWlCO0VBQ2pCLFlBQVk7RUFDWixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsYUFBYTtFQUNiLGdCQUFnQjs7QUFFbEI7QUFDQTtFQUNFLFlBQVk7QUFDZDtBQUNBO0VBQ0UscUJBQXFCO0FBQ3ZCO0FBQ0E7O0VBRUUsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixpQkFBaUI7RUFDakIsZUFBZSxDQUFDO0FBQ2xCO0VBQ0UsV0FBVztFQUNYLHVCQUF1QjtFQUN2QixjQUFjO0FBQ2hCO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsY0FBYztFQUNkLGVBQWU7OztFQUdmLDhCQUE4Qjs7O0VBRzlCLGlCQUFpQjs7Ozs7QUFLbkI7QUFDQTtFQUNFO0lBQ0UsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixlQUFlO0lBQ2YsWUFBWTtFQUNkOztBQUVGIiwic291cmNlc0NvbnRlbnQiOlsiLmhlYWRlcntcclxuICBwYWRkaW5nLXRvcDogM3JlbTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDpjZW50ZXI7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgZm9udC1zaXplOiAyNXB4O1xyXG5cclxuXHJcbn1cclxuQG1lZGlhKG1heC13aWR0aDo3MDBweCl7XHJcbiAgLmhlYWRlcntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcblxyXG5cclxuICB9XHJcblxyXG59XHJcbmZvcm17XHJcblxyXG4gIGJvcmRlcjogM3B4IHNvbGlkIGdyZWVuO1xyXG5cclxufVxyXG4uTm9te1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgbWFyZ2luLXRvcDogMiU7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxJTtcclxuXHJcblxyXG5cclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcblxyXG5cclxuICBmb250LXdlaWdodDogYm9sZDtcclxuXHJcblxyXG5cclxuXHJcbn1cclxuXHJcbmZvcm0gYnV0dG9ue1xyXG4gIGp1c3RpZnktY29udGVudDogc3RhcnQ7XHJcblxyXG59XHJcblxyXG5idXR0b257XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgYm9yZGVyLXJhZGl1czogNSU7XHJcbiAgd2lkdGg6IDEwMHB4O1xyXG4gIGhlaWdodDogNTBweDtcclxuICBjb2xvcjogYWxpY2VibHVlO1xyXG4gIG1hcmdpbi10b3A6IDMlO1xyXG4gIG1hcmdpbi1ib3R0b206IDIlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgbWFyZ2luLWxlZnQ6IDQ1JTtcclxuXHJcbn1cclxuLmZvcm12YWxpZHtcclxuICBvcGFjaXR5OiAwLjM7XHJcbn1cclxuaW5wdXQubmctaW52YWxpZC5uZy10b3VjaGVke1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJlZDtcclxufVxyXG4uaGVhZGVyMntcclxuXHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIGZvbnQtc2l6ZTogMjVweDt9XHJcbi5saW5lcntcclxuICBoZWlnaHQ6IDNweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcclxuICBtYXJnaW4tdG9wOiAxJTtcclxufVxyXG4uZm9ybTJ7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBtYXJnaW4tdG9wOiAyJTtcclxuICBmbGV4LXdyYXA6IHdyYXA7XHJcblxyXG5cclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcblxyXG5cclxuICBmb250LXdlaWdodDogYm9sZDtcclxuXHJcblxyXG5cclxuXHJcbn1cclxuQG1lZGlhKG1heC13aWR0aDoxMDAwcHgpIHtcclxuICBmb3Jte1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbiAgICBmbGV4LWdyb3c6IDE7XHJcbiAgfVxyXG5cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ResultatFormComponent","constructor","activatedRoute","resultatprelevement","route","ngOnInit","params","subscribe","resultat","idPrelevement","onSubmit","console","log","Signupfrom","value","dateBA","date_BA","numeroBA","jwt","localStorage","getItem","jwtData","split","decodedJwtJsonData","window","atob","decodedJwtData","JSON","parse","idPersonne","choix","conforme","dateTA","detail","numeroTA","DateTA","Détail","NuméroTA","saveresultat","next","data","reset","navigate","error","err","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\P15S 1\\Desktop\\fronte\\mini-projet-front\\mini-projet-front\\src\\app\\components\\resultat-form\\resultat-form.component.html","C:\\Users\\P15S 1\\Desktop\\fronte\\mini-projet-front\\mini-projet-front\\src\\app\\components\\resultat-form\\resultat-form.component.ts"],"sourcesContent":["<div class=\"header\"> Enregister les résultats de prélèvement d'échantillons:{{resultat.idPrelevement}}</div>\r\n<form (ngSubmit)=\"onSubmit()\" #f=\"ngForm\">\r\n  <div class=\"Nom\">\r\n    <div class=\"Nom3\"> <label for=\"Nom\" >Numéro BA:</label>\r\n      <input placeholder=\"ex:2334\" type=\"text\" ngModel  name=\"numeroBA\" required number> </div>\r\n    <div class=\"Nom3\"><label for=\"date\">Date de BA:</label>\r\n      <input type=\"date\" ngModel name=\"date_BA\" required> </div>\r\n    <div class=\"Nom3\">  <label for=\"Typeprel\">Conformité:</label>\r\n      <select [(ngModel)]=\"selected\"  name=\"choix\">\r\n        <option >Oui</option>\r\n        <option >Non</option>\r\n      </select></div></div>\r\n  <div   *ngIf=\"selected==='Non'\" >\r\n    <div class=\"liner\"></div>\r\n    <div class=\"header2\">Détail de non conformité</div>\r\n    <div class=\"form2\">  <div class=\"Nom2\"> <label for=\"Nom\" >Numéro TA:</label>\r\n\r\n      <input placeholder=\"ex:2334\" type=\"text\" ngModel  name=\"NuméroTA\" required number></div>\r\n      <div class=\"Nom2\"><label for=\"Nom\" >Date TA:</label>\r\n        <input  type=\"Date\" ngModel  name=\"DateTA\" required></div>\r\n      <div class=\"Nom2\"> <label for=\"Nom\" >Détail:</label>\r\n        <input  type=\"text\" ngModel  name=\"Détail\" required>\r\n      </div></div>\r\n  </div>\r\n  <button type=\"submit\" [disabled]=\"!f.valid\" class=\"btn btn-success\">Soumettre</button>\r\n</form>\r\n","import {Component, ViewChild} from '@angular/core';\r\nimport {NgForm} from \"@angular/forms\";\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ResultatPrelevementDtos } from 'src/app/models/resultatPrelevement.model';\r\nimport { ResultatPrelevementService } from 'src/app/services/resultat-prelevement.service';\r\n\r\n@Component({\r\n  selector: 'app-resultat-form',\r\n  templateUrl: './resultat-form.component.html',\r\n  styleUrls: ['./resultat-form.component.css']\r\n})\r\nexport class ResultatFormComponent {\r\n  selected!: string;\r\n  page!: number;\r\n  resultat!: ResultatPrelevementDtos;\r\n  constructor( private activatedRoute: ActivatedRoute,private resultatprelevement:ResultatPrelevementService,private route:Router){\r\n  }\r\n  @ViewChild('f') Signupfrom: NgForm | undefined;\r\n  ngOnInit(): void {\r\n    this.activatedRoute.params.subscribe(params => {\r\n      this.resultat.idPrelevement = params['id'];})\r\n\r\n    }\r\n\r\n  onSubmit(){\r\n  console.log(this.Signupfrom?.value);\r\n  this.resultat.dateBA=this.Signupfrom?.value.date_BA;\r\n  this.resultat.numeroBA=this.Signupfrom?.value.numeroBA;\r\n  let jwt: string | null = localStorage.getItem('token');\r\n    let jwtData: string = '';\r\n    if (jwt) jwtData = jwt.split('.')[1];\r\n    let decodedJwtJsonData = window.atob(jwtData);\r\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n    let idPersonne = decodedJwtData.idPersonne;\r\nthis.resultat.idPersonne=idPersonne;\r\n  if(this.Signupfrom?.value.choix==\"Oui\"){\r\n    this.resultat.conforme=true;\r\n    this.resultat.dateTA=\"\";\r\n    this.resultat.detail=\"\";\r\n    this.resultat.numeroTA=0;\r\n\r\n    \r\n  }\r\n  else{\r\n    this.resultat.conforme=false;\r\n    this.resultat.dateTA=this.Signupfrom?.value.DateTA;\r\n    this.resultat.detail=this.Signupfrom?.value.Détail;\r\n    this.resultat.numeroTA=this.Signupfrom?.value.NuméroTA;\r\n  }\r\n  this.resultatprelevement.saveresultat(this.resultat).subscribe({\r\n    next: data => {\r\n      console.log(\"Gooood\");\r\n      this.Signupfrom?.reset();\r\n      this.route.navigate([\"feedback\"]);\r\n    },\r\n    error: err => {\r\n      console.log(err);\r\n    }\r\n  })\r\n  }\r\n  \r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
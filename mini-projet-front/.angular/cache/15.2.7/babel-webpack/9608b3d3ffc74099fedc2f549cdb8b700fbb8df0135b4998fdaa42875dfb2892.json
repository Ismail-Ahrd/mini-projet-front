{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet PrelevementInfoComponent = class PrelevementInfoComponent {\n  constructor(prelevementService, fb, router, activatedRoute, authservice) {\n    this.prelevementService = prelevementService;\n    this.fb = fb;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.authservice = authservice;\n    this.page = 0;\n  }\n  ngOnInit() {\n    this.authservice.getDecodeToken().subscribe({\n      next: data => {\n        console.log(\"hello\");\n        this.decodedToken = data;\n        console.log(data);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n    this.activatedRoute.paramMap.subscribe(params => {\n      const pageString = params.get(\"page\");\n      if (typeof pageString === \"string\") {\n        this.page = JSON.parse(pageString);\n      }\n    });\n    this.filterFormGroup = this.fb.group({\n      keyword: this.fb.control(\"\"),\n      etat: this.fb.control(\"\")\n    });\n    this.handleGetAllPrelevement(\"\", \"\", this.page, 5);\n  }\n  handleGetAllPrelevement(keyword, etat, page, size) {\n    this.prelevementService.getAllPrelevement(keyword, etat, page, size).subscribe({\n      next: data => {\n        this.prelevementResponses = data;\n        //console.log(data)\n      },\n\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n  goToPage(page) {\n    const currentUrl = this.router.url;\n    const updatedUrl = currentUrl.replace(/;page=\\d+/, '');\n    this.router.navigateByUrl(updatedUrl);\n    let keyword = this.filterFormGroup.value.keyword;\n    let etat = this.filterFormGroup.value.etat;\n    this.handleGetAllPrelevement(keyword, etat, page, 5);\n  }\n  handleDeletePrelevement(id, page, size) {\n    //console.log(id, page, size);\n    let keyword = this.filterFormGroup.value.keyword;\n    let etat = this.filterFormGroup.value.etat;\n    let conf = confirm(\"Êtes-vous sûr?\");\n    if (!conf) return;\n    this.prelevementService.deletePrelevement(id).subscribe({\n      next: data => {\n        //console.log(data);\n        this.handleGetAllPrelevement(keyword, etat, page, size);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n  handleFilterPrelevement() {\n    let keyword = this.filterFormGroup.value.keyword;\n    let etat = this.filterFormGroup.value.etat;\n    this.handleGetAllPrelevement(keyword, etat, 0, 5);\n  }\n  goToPrelevementForm() {\n    this.router.navigateByUrl(\"/prelvementForm\");\n  }\n  handleUpdatePrelevement(prelevement, page) {\n    //console.log(prelevement);\n    this.router.navigate([`prelevementForm/${prelevement.id}`, {\n      prelevement: JSON.stringify(prelevement),\n      page\n    }]);\n  }\n  goToPrelevemenresultat(prelevement) {\n    this.router.navigate(['/resultatForm', prelevement.id]);\n  }\n};\nPrelevementInfoComponent = __decorate([Component({\n  selector: 'app-prelevement-info',\n  templateUrl: './prelevement-info.component.html',\n  styleUrls: ['./prelevement-info.component.css']\n})], PrelevementInfoComponent);\nexport { PrelevementInfoComponent };","map":{"version":3,"mappings":"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","names":["Component","PrelevementInfoComponent","constructor","prelevementService","fb","router","activatedRoute","authservice","ngOnInit","getDecodeToken","subscribe","next","data","console","log","decodedToken","error","err","paramMap","params","pageString","get","page","JSON","parse","filterFormGroup","group","keyword","control","etat","handleGetAllPrelevement","size","getAllPrelevement","prelevementResponses","goToPage","currentUrl","url","updatedUrl","replace","navigateByUrl","value","handleDeletePrelevement","id","conf","confirm","deletePrelevement","handleFilterPrelevement","goToPrelevementForm","handleUpdatePrelevement","prelevement","navigate","stringify","goToPrelevemenresultat","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\hp\\OneDrive\\Desktop\\Nouveau dossier (5)\\mini-projet-front\\mini-projet-front\\src\\app\\components\\prelevement-info\\prelevement-info.component.ts"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\r\nimport {PrelevementService} from \"../../services/prelevement.service\";\r\nimport {Prelevement, PrelevementResponse} from \"../../models/prelevement.model\";\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {PageEvent} from \"@angular/material/paginator\";\r\nimport {MatPaginator} from \"@angular/material/paginator\";\r\nimport {ActivatedRoute, NavigationExtras, Router} from \"@angular/router\";\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-prelevement-info',\r\n  templateUrl: './prelevement-info.component.html',\r\n  styleUrls: ['./prelevement-info.component.css']\r\n})\r\nexport class PrelevementInfoComponent implements OnInit{\r\n  prelevementResponses!: PrelevementResponse;\r\n  filterFormGroup!: FormGroup;\r\n  page: number = 0;\r\n  decodedToken!: any;\r\n\r\n  constructor(private prelevementService: PrelevementService,\r\n              private fb: FormBuilder,\r\n              private router: Router,\r\n              private activatedRoute: ActivatedRoute,public authservice:AuthenticationService) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.authservice.getDecodeToken().subscribe({\r\n      next: data => {\r\n        console.log(\"hello\")\r\n        this.decodedToken = data;\r\n        console.log(data)\r\n      },\r\n      error : err => {\r\n        console.log(err);\r\n      }\r\n    })\r\n\r\n    this.activatedRoute.paramMap.subscribe(params => {\r\n      const pageString = params.get(\"page\");\r\n      if (typeof pageString === \"string\") {\r\n        this.page = JSON.parse(pageString);\r\n      }\r\n    })\r\n\r\n    this.filterFormGroup = this.fb.group({\r\n      keyword: this.fb.control(\"\"),\r\n      etat: this.fb.control(\"\")\r\n    });\r\n\r\n    this.handleGetAllPrelevement(\"\", \"\",  this.page, 5);\r\n\r\n  }\r\n\r\n  handleGetAllPrelevement(keyword: string, etat: string, page: number, size: number) {\r\n    this.prelevementService.getAllPrelevement(keyword,etat,page,size).subscribe({\r\n      next: data => {\r\n        this.prelevementResponses = data;\r\n        //console.log(data)\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  goToPage(page: number) {\r\n    const currentUrl = this.router.url;\r\n    const updatedUrl = currentUrl.replace(/;page=\\d+/, '');\r\n    this.router.navigateByUrl(updatedUrl);\r\n\r\n    let keyword: string = this.filterFormGroup.value.keyword;\r\n    let etat: string = this.filterFormGroup.value.etat;\r\n    this.handleGetAllPrelevement(keyword, etat, page, 5);\r\n  }\r\n\r\n  handleDeletePrelevement(id: number, page: number, size: number) {\r\n    //console.log(id, page, size);\r\n    let keyword: string = this.filterFormGroup.value.keyword;\r\n    let etat: string = this.filterFormGroup.value.etat;\r\n    let conf: boolean = confirm(\"Êtes-vous sûr?\");\r\n    if(!conf) return\r\n    this.prelevementService.deletePrelevement(id).subscribe({\r\n      next: data => {\r\n        //console.log(data);\r\n        this.handleGetAllPrelevement(keyword, etat, page, size);\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  handleFilterPrelevement() {\r\n    let keyword: string = this.filterFormGroup.value.keyword;\r\n    let etat: string = this.filterFormGroup.value.etat;\r\n    this.handleGetAllPrelevement(keyword, etat, 0, 5);\r\n  }\r\n\r\n  goToPrelevementForm() {\r\n    this.router.navigateByUrl(\"/prelvementForm\");\r\n  }\r\n\r\n  handleUpdatePrelevement(prelevement: Prelevement, page: number) {\r\n    //console.log(prelevement);\r\n    this.router.navigate(\r\n        [`prelevementForm/${prelevement.id}`, {prelevement : JSON.stringify(prelevement), page} ])\r\n  }\r\n\r\n  goToPrelevemenresultat(prelevement: Prelevement) {\r\n    this.router.navigate(['/resultatForm',prelevement.id]);\r\n  }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}